<div class="row" *ngIf="loaded">
  <div class="col-3"></div>
  <div class="col-6">
    <h1>Mon profil</h1>
    <form [formGroup]="usernameData" (ngSubmit)="updateUsername()" *ngIf="profileExist">
      <div class="form-group row">
        <label for="username" class="form-label">Nom d'utilisateur*</label>
        <input type="text" class="form-control" id="username" placeholder="Pseudo" formControlName="username" required />
      </div>
      <div *ngIf="usernameData.controls.username.errors !== null">
        <div class="alert alert-danger" role="alert" *ngIf="(usernameSubmited || usernameData.controls.username.touched) && usernameData.controls.username.hasError('required')">
          Nom d'utilisateur obligatoire !
        </div>
        <div class="alert alert-danger" role="alert" *ngIf="(usernameSubmited || usernameData.controls.username.touched) && usernameData.controls.username.hasError('minlength')">
          Votre nom d'utilisateur doit au moins faire 4 caractère de long !
        </div>
        <div class="alert alert-danger" role="alert" *ngIf="usernameExist">
          Ce nom d'utilisateur existe déjà !
        </div>
      </div>
      <div class="form-group row">
        <button type="submit" class="btn btn-primary form-control">Mettre à jour le nom d'utilisateur</button>
      </div>
    </form>
    <form [formGroup]="usernameData" (ngSubmit)="createProfile()" *ngIf="!profileExist">
      <div class="form-group row">
        <label class="form-label">Vous n'avez pas encore de profil, veuillez choisir un nom d'utilisateur pour pouvoir accéder aux fonctionnalités du site.</label>
      </div>
      <div class="form-group row">
        <label for="username" class="form-label">Nom d'utilisateur*</label>
        <input type="text" class="form-control" id="username" placeholder="Pseudo" formControlName="username" required />
      </div>
      <div *ngIf="usernameData.controls.username.errors !== null">
        <div class="alert alert-danger" role="alert" *ngIf="(usernameSubmited || usernameData.controls.username.touched) && usernameData.controls.username.hasError('required')">
          Nom d'utilisateur obligatoire !
        </div>
        <div class="alert alert-danger" role="alert" *ngIf="(usernameSubmited || usernameData.controls.username.touched) && usernameData.controls.username.hasError('minlength')">
          Votre nom d'utilisateur doit au moins faire 4 caractère de long !
        </div>
        <div class="alert alert-danger" role="alert" *ngIf="usernameExist">
          Ce nom d'utilisateur existe déjà !
        </div>
      </div>
      <div class="form-group row">
        <button type="submit" class="btn btn-primary form-control">Créer le profil</button>
      </div>
    </form>
  </div>
</div>